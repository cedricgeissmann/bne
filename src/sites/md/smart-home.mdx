import Chapter from "../../components/Chapter"
import Example from "../../components/Example"
import Img from "../../components/Img"
import SVGImg from "../../components/SVGImg"
import Audio from "../../components/Audio"
import AudioSummary from "../../components/AudioSummary"
import URLComponent from "../../components/URL"
import { Answer, Answers, Question, Quiz } from "../../components/Quiz"
import Presentation, {
  Slide,
  Basement,
  Fragment,
} from "../../components/Reveal"
import LazySVG from "../../components/LazySVG"
import Math from "../../components/Katex"

<Chapter>

<Presentation>
  <Slide>
    <h2>Smart Home</h2>
  </Slide>
  <Slide>
    <h3>Automatisiertes Eigenheim</h3>
    <Basement>
      Wie oft sind Sie im Bett und merken, dass der Lichtschalter quer durchs
      Zimmer ist?
    </Basement>
    <Basement className="fragment">
      Oder Sie sind unsicher, ob alle Lichter ausgeschaltet sind.
    </Basement>
    <Basement className="fragment">
      Heimautomatisierung ermöglicht Komfort und Energieeinsparung.
    </Basement>
  </Slide>
  <Slide>
    <h3>Wie funktioniert eine Lampe?</h3>
    <Basement>
      Eine Lampe hat ein Leuchtmittel, das elektrische Energie in Licht
      umwandelt.
    </Basement>
    <Basement>
      <LazySVG
        src="./svg/circuit-diagram.svg"
        alt="Circuit Diagram"
        containerClassName="lazy-svg-container"
        svgStyle={{
          backgroundColor: "#efefef",
          width: "100%",
          height: "auto",
          cursor: "pointer",
        }}
      />
    </Basement>
    <Basement className="fragment">
      Ein geschlossener Stromkreislauf ist notwendig, gesteuert durch einen
      Lichtschalter.
    </Basement>
    <Basement className="fragment">
      Moderne Mikrocontroller ermöglichen das Schalten per Internet.
    </Basement>
  </Slide>
  <Slide>
    <h3>Anschluss ans Internet</h3>
    <Basement>
      Mikrocontroller werden über Funkwellen, meist WLAN, angesteuert.
    </Basement>
    <Basement className="fragment">
      Signale können per Klick auf Webseiten gesendet werden.
    </Basement>
    <Basement className="fragment">
      Zugriff von ausserhalb erfolgt über NAT (Network Address Translation).
    </Basement>
  </Slide>
  <Slide>
    <h3>Sicherheit</h3>
    <Basement>Jedes Gerät im Heimnetz hat eine eigene IP-Adresse.</Basement>
    <Basement>
      <LazySVG
        src="./svg/nat-diagram.svg"
        alt="NAT Diagram"
        containerClassName="lazy-svg-container"
        svgStyle={{ width: "100%", height: "auto", cursor: "pointer" }}
      />
    </Basement>
    <Basement className="fragment">
      Zugriff wird verschlüsselt und nur mit Schlüssel erlaubt.
    </Basement>
    <Basement className="fragment">
      <div className="hint huge">
        Externe Anbieter können Sicherheitslücken verursachen.
      </div>
    </Basement>
  </Slide>
  <Slide>
    <h3>Sparpotential</h3>
    <Basement>
      Komplexe Setups mit Solarzellen ermöglichen Energieeinsparungen.
    </Basement>
    <Basement className="fragment">
      Feine Heizungssteuerung verbessert Komfort und Schlaf.
    </Basement>
    <Basement className="fragment">
      Automatische Steuerung von Geräten basierend auf Wetter und
      Energieproduktion.
    </Basement>
    <Basement className="fragment">
      <div className="hint huge">
        Energieeinsparung hängt von Situation und Serververbrauch ab.
      </div>
    </Basement>
  </Slide>
</Presentation>

<h2 id="networks">Automatisiertes Eigenheim</h2>

Wie oft sind Sie zu Hause bereits im Bett, haben sich in die Decke eingekuschelt
und merken dann, dass der Lichtschalter einmal quer durchs kalte Zimmer ist?
Oder Sie müssen im Stress das Haus verlassen und wissen nicht mehr, ob Sie alle
Lichter ausgeschaltet haben? Oder Sie sind auf dem Heimweg und möchten direkt
einen warmen Kaffee oder Tee trinken? All das können Sie über die
Heimautomatisierung erreichen. Und wenn alles gut läuft, können Sie dabei sogar
Energie sparen. Aber wie funktioniert das Ganze?

<Example id="light" title="Wie funktioniert eine Lampe?">

Eine Lampe hat immer ein Leuchtmittel (Glühbirne). Das Leuchtmittel wandelt
elektrische Energie in Licht um. Es wird also heller, dafür nimmt die
elektrische Energie jedoch ab.

Damit das funktionieren kann, muss elektrische Energie zum Leuchtmittel geleitet
werden, also ein Stromkreislauf muss geschlossen sein. Das Öffnen und Schliessen
eines Stromkreislaufs kann man mit einem herkömmlichen Lichtschalter erreichen.

<LazySVG
  src="./svg/circuit-diagram.svg"
  alt="Circuit Diagram"
  containerClassName="lazy-svg-container"
  svgStyle={{ width: "100%", height: "auto", cursor: "pointer" }}
/>

Dank moderner Mikrocontroller können wir ganz einfach den Schalter direkt in der
Glühbirne verbauen und diesen über das Internet ansteuern. Dadurch ist es auch
möglich, aus dem warmen Bett das Licht an- oder auszuschalten.

</Example>

<h2 id="anschluss-internet">Anschluss ans Internet</h2>

Wir können uns einfach vorstellen, dass diese Mikrocontroller über Funkwellen
angesteuert werden können. Zur Vereinfachung können wir uns auch vorstellen,
dass es direkt das WLAN-Signal im eigenen Netzwerk sein soll. Somit ist es
einfach vorstellbar, dass man mit einem Klick auf einer Webseite ein Signal an
eine Glühbirne senden kann – wie das Aufrufen einer Webseite. Im eigenen
Netzwerk kann man sich das sehr einfach vorstellen, aber wie kann ich das nun
von ausserhalb machen? Da kommt NAT ins Spiel.

<LazySVG
  src="./svg/nat-diagram.svg"
  alt="NAT Diagram"
  containerClassName="lazy-svg-container"
  svgStyle={{ width: "100%", height: "auto", cursor: "pointer" }}
/>

Dank NAT (Network Address Translation) hat jedes Gerät im Heimnetz eine eigene
IP-Adresse. Also jede Glühbirne und jedes andere _smarte_ Gerät kann über das
Netzwerk angesteuert werden und auch Daten austauschen. Wenn man nun von außen
auf diese Geräte zugreifen möchte, kann man eine einfache Anfrage an die eigene
öffentliche IP-Adresse schicken. Dort wird die Anfrage von einem Server
verarbeitet, und dieser reicht die Anfrage dann über das interne Netz weiter.

Der Zugriff auf so einen Server kann einfach verschlüsselt werden und nur mit
einem Schlüssel erlaubt werden, somit kommen nur registrierte Benutzer in das
Heimnetzwerk.

<Example classes="danger" id="security" title="Sicherheit">

Das oben beschriebene Konzept ist in der Regel sicher, solange der Server auch
sicher ist. Sicherheitslücken treten eigentlich immer dann auf, wenn Geräte von
einem externen Anbieter verwendet werden. Oftmals ist es so, dass Ihnen ein
Anbieter eine _smarte_ Glühbirne verkauft und dazu noch eine App. Das erscheint
sehr praktisch, denn Sie installieren die Glühbirne, öffnen die App und alles
klappt. Aber in diesem Fall muss der Anbieter eine direkte Verbindung nach
draussen haben, oder es wird ein Zusatzgerät in Ihrem Heimnetzwerk installiert,
das eine direkte Verbindung nach aussen hat. Diese Zusatzgeräte sind oft ein
Sicherheitsproblem, und da Sie mehrere davon brauchen (eines pro Anbieter),
haben Sie auch viele Sicherheitslücken.

</Example>

<h2 id="savings">Sparrpotential</h2>

Bei einem komplexeren Setup mit Solarzellen auf dem Dach und vielen weiteren
Geräten können wir uns leicht vorstellen, dass auch Energie eingespart werden
kann. Zum Beispiel können wir die Heizung viel feiner kontrollieren, als es
herkömmlich der Fall ist. Wir können die Temperatur auch so regeln lassen, dass
es am Tag bei <Math>21^\circ</Math> ist und <Math>19^\circ</Math> in der Nacht.
Dadurch sollte auch der Schlaf verbessert werden können.

Auch einfache Regeln sind vorstellbar. Wenn wir einen Server haben, können wir
alle Metriken auslesen und auch das Wetter online überprüfen. Lesen wir zum
Beispiel, dass gerade viel Strom mit den Solarzellen produziert wird und wir
sehen, dass das Wetter für die nächsten paar Stunden gut bleibt, dann können wir
beispielsweise den Geschirrspüler automatisch anschalten.

<div className="hint">

Ob mit allen Automatisierungen tatsächlich mehr Energie gespart wird als manuell
und mit sehr energiesparenden Geräten, ist sehr schwer zu beantworten. Das hängt
sehr stark von der Situation ab und natürlich davon, wie viel Strom der Server
braucht. Moderne Server brauchen nur extrem wenig Strom, aber dennoch müsste man
es in jedem Fall zuerst messen, um zu sehen, ob Energie gespart werden kann.

</div>

<AudioSummary src="./audio/smart-home.mp3" />

</Chapter>
